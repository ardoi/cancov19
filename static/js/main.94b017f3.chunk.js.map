{"version":3,"sources":["components/cxContext.js","util.js","data/country-by-population.js","components/chartTemplate.js","components/provinceChart.js","components/timeChart.js","components/statNumber.js","components/dailyTimeChart.js","components/normalizedChart.js","components/textDisplay.js","components/canadaDashboard.js","components/worldDashboard.js","components/dashboard.js","App.js","serviceWorker.js","index.js"],"names":["CXContext","React","createContext","DataContext","state","detailData","deathData","detailDataW","loading","hasCF","this","dims","urlBase","url","url2g","setState","processDeathData","data","forEach","d","Date","moment","Total","parseFloat","Deaths","filter","x","Prov","cfd","crossfilter","clonedData","JSON","parse","stringify","cfdn","date","dimension","dateN","prov","provN","p1","csv","then","Cases","cf","cfn","catch","error","console","log","backupUrlBase","p2","processJHData","key","dd","d3a","columns","slice","ddate","country","region","value","lat","Lat","lon","Long","q","Array","from","v","totals","map","total","parseInt","length","sort","a","b","keep","out","includes","i","push","cfw","cfwn","p3","p4","Promise","all","worldDetailData","worldDeathData","Provider","dimensions","ref","parent","props","children","Component","colorf","rgb","darker","formatHex","sortpc","provinces","colors","merged","a1","a2","y","population","ON","QC","BC","AB","SK","NL","NS","MB","NB","PE","YT","NT","NU","getWindowDimensions","window","width","innerWidth","height","innerHeight","totalReduce","group","reduce","p","provinceTotalReduce","populationW","renames","name","hasOwnProperty","ResetButton","style","css","cursor","Label","onClick","chart","filterAll","dc","ChartTemplate","button","label","header","context","useContext","useState","updateChart","chartData","updateChartData","params","usedata","div","useRef","windowSize","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","newChart","chartFunction","current","render","reset","Popup","content","trigger","circular","color","title","Header","as","provinceChartFunc","divRef","chartW","chartH","normalize","top","chartGroup","loc","provinceChart","popData","margins","right","bottom","left","cap","elasticX","othersGrouper","valueAccessor","ordinalColors","Object","keys","reverse","xAxis","ticks","ProvinceChart","timeChartFunc","pgroup","stack","stacked","accumulate_group","source_group","sa","cumulate","res","el","entries","k","smallestProvince","sel","dcchartGroup","timeChart","renderArea","elasticY","brushOn","clipPadding","xyTipsOn","scaleTime","domain","add","tickFormat","format","yAxis","pk","TimeChart","statNumberFunc","getValue","groupAll","reduceSum","quarterChart","ordering","StatNumber","dailyTimeChartFunc","pdim","provincesG","DailyTimeChart","pCounts","ag","charts","ix","compose","NormalizedChart","LastDateDisplay","vals","last","max","CanadaDashboard","panes_cumulative","menuItem","pane","Tab","Pane","attached","panes_daily","cases","Grid","Row","Column","GridRow","centered","Statistic","size","StatisticValue","StatisticLabel","Segment","menu","secondary","pointing","panes","renderActiveOnly","panes_cumulative_d","panes_daily_d","deaths","normalized","normalizedd","className","borderless","tabular","WorldDashboard","Dashboard","icon","inverted","id","textAlign","Icon","href","App","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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MAKR,IAAME,EAAc,GACrBC,EAAU,CACZ,iBAAiB,UACjB,gBAAgB,MC/GG,CACnB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,iBACX,WAAc,SAElB,CACI,QAAW,UACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,SAElB,CACI,QAAW,aACX,WAAc,MAElB,CACI,QAAW,sBACX,WAAc,UAElB,CACI,QAAW,YACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,UAElB,CACI,QAAW,YACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,aAElB,CACI,QAAW,WACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,yBACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,gBACX,WAAc,MAElB,CACI,QAAW,SACX,WAAc,aAElB,CACI,QAAW,iCACX,WAAc,MAElB,CACI,QAAW,SACX,WAAc,UAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,eACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,aACX,WAAc,UAElB,CACI,QAAW,iBACX,WAAc,SAElB,CACI,QAAW,2BACX,WAAc,WAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,cAElB,CACI,QAAW,mBACX,WAAc,QAElB,CACI,QAAW,0BACX,WAAc,OAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,WAElB,CACI,QAAW,eACX,WAAc,SAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,iBACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,UAElB,CACI,QAAW,WACX,WAAc,SAElB,CACI,QAAW,qBACX,WAAc,YAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,MAElB,CACI,QAAW,oBACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,aAElB,CACI,QAAW,mBACX,WAAc,QAElB,CACI,QAAW,gBACX,WAAc,SAElB,CACI,QAAW,eACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,gBACX,WAAc,UAElB,CACI,QAAW,mBACX,WAAc,UAElB,CACI,QAAW,8BACX,WAAc,MAElB,CACI,QAAW,QACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,YACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,YACX,WAAc,SAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,aACX,WAAc,UAElB,CACI,QAAW,OACX,WAAc,UAElB,CACI,QAAW,YACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,gBACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,oCACX,WAAc,MAElB,CACI,QAAW,gCACX,WAAc,QAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,cAElB,CACI,QAAW,YACX,WAAc,aAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,aAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,UAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,OACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,yBACX,WAAc,WAElB,CACI,QAAW,gBACX,WAAc,SAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,UAElB,CACI,QAAW,kBACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,UAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,UAElB,CACI,QAAW,mBACX,WAAc,SAElB,CACI,QAAW,aACX,WAAc,UAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,SACX,WAAc,aAElB,CACI,QAAW,kCACX,WAAc,MAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,SAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,aACX,WAAc,QAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,aACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,SAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,uBACX,WAAc,UAElB,CACI,QAAW,gBACX,WAAc,UAElB,CACI,QAAW,cACX,WAAc,WAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,aAElB,CACI,QAAW,OACX,WAAc,QAElB,CACI,QAAW,iBACX,WAAc,QAElB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,mBACX,WAAc,MAElB,CACI,QAAW,2BACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,OACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,aAElB,CACI,QAAW,QACX,WAAc,SAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,mBACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,OACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,aAElB,CACI,QAAW,WACX,WAAc,MAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,qBACX,WAAc,aAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,eACX,WAAc,QAElB,CACI,QAAW,wBACX,WAAc,SAElB,CACI,QAAW,cACX,WAAc,UAElB,CACI,QAAW,4BACX,WAAc,QAElB,CACI,QAAW,mCACX,WAAc,UAElB,CACI,QAAW,QACX,WAAc,UAElB,CACI,QAAW,aACX,WAAc,SAElB,CACI,QAAW,wBACX,WAAc,UAElB,CACI,QAAW,eACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,MAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,aACX,WAAc,SAElB,CACI,QAAW,eACX,WAAc,WAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,WAElB,CACI,QAAW,kBACX,WAAc,UAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,eACX,WAAc,YAElB,CACI,QAAW,+CACX,WAAc,MAElB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,cACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,UAElB,CACI,QAAW,yBACX,WAAc,QAElB,CACI,QAAW,YACX,WAAc,WAElB,CACI,QAAW,SACX,WAAc,WAElB,CACI,QAAW,cACX,WAAc,WAElB,CACI,QAAW,QACX,WAAc,YAElB,CACI,QAAW,aACX,WAAc,WAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,WACX,WAAc,YAElB,CACI,QAAW,mCACX,WAAc,MAElB,CACI,QAAW,OACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,QAElB,CACI,QAAW,QACX,WAAc,UAElB,CACI,QAAW,sBACX,WAAc,WAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,eACX,WAAc,WAElB,CACI,QAAW,2BACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,SAElB,CACI,QAAW,SACX,WAAc,YAElB,CACI,QAAW,UACX,WAAc,YAElB,CACI,QAAW,uBACX,WAAc,WAElB,CACI,QAAW,iBACX,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","file":"static/js/main.94b017f3.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"dc/dist/style/dc.css\";\nimport { csv } from \"d3-fetch\";\n// import { cross, rollups } from \"d3-array\";\nimport * as d3a from \"d3-array\" ;\nimport moment from \"moment\";\nimport crossfilter from \"crossfilter2\";\nexport const CXContext = React.createContext(\"CXContext\");\n\nexport default class DataContext extends Component {\n    state = {\n        detailData: null,\n        deathData: null,\n        detailDataW: null,\n        // dim:null,\n        loading: false,\n        hasCF: false\n    };\n    componentDidMount() {\n        if (this.state.hasCF) {\n            return;\n        }\n        if (this.state.loading) {\n            return;\n        }\n        this.dims = {}\n        const dateFormat = \"D-MMM-YYYY\";\n        const urlBase =\n            \"https://docs.google.com/spreadsheets/d/1C59nxtgcnwGyo6lgypsgN18duxmwWigjeVdKY58t0mU/gviz/tq?tqx=out:csv&sheet=\";\n        const url = urlBase + \"Det\";\n        const url2g = urlBase + \"Dth\";\n        this.setState({ loading: true });\n\n        const processDetailData = data => {\n            data.forEach(d => {\n                d.Date = moment(d.Date + \"-2020\", dateFormat);\n                d.Total = parseFloat(d.Cases);\n            });\n            data = data.filter(x => x.Prov !== \"RC\");\n            const cf = crossfilter(data);\n            const clonedData = JSON.parse(JSON.stringify(data));\n            clonedData.forEach(x => {\n                x.Date = moment(x.Date);\n            });\n            const cfn = crossfilter(clonedData);\n\n            this.dims['detailC']={\n                date: cf.dimension(d => d.Date), \n                dateN: cfn.dimension(d => d.Date),\n                prov: cf.dimension(d => d.Prov), \n                provN: cfn.dimension(d => d.Prov)\n            };\n            return data;\n        };\n\n        const processDeathData = data => {\n            data.forEach(d => {\n                d.Date = moment(d[\"Announced\"] + \"-2020\", dateFormat);\n                d.Total = parseFloat(d.Deaths);\n            });\n            data = data.filter(x => x.Prov !== \"RC\");\n            const cfd = crossfilter(data);\n            const clonedData = JSON.parse(JSON.stringify(data));\n            clonedData.forEach(x => {\n                x.Date = moment(x.Date);\n            });\n            const cfdn = crossfilter(clonedData);\n            this.dims['deathC']={\n                date: cfd.dimension(d => d.Date), \n                dateN: cfdn.dimension(d => d.Date),\n                prov: cfd.dimension(d => d.Prov), \n                provN: cfdn.dimension(d => d.Prov)\n            };\n            return data;\n        };\n        //backup URL's in case there are CORS errors\n        const backupUrlBase = \"https://cors-anywhere.herokuapp.com/\";\n        const backupUrl = backupUrlBase + url;\n        const backupUrl2 = backupUrlBase + url2g;\n\n        const p1 = csv(url)\n            .then(processDetailData)\n            .catch(error => {\n                console.log(\"failed with url\", error);\n                return csv(backupUrl)\n                    .then(processDeathData)\n                    .catch(error => {\n                        console.log(\"backuperror 1\", error);\n                    });\n            });\n\n        const p2 = csv(url2g)\n            .then(processDeathData)\n            .catch(error => {\n                console.log(\"failed with url2\", error);\n                return csv(backupUrl2)\n                    .then(processDeathData)\n                    .catch(error => {\n                        console.log(\"backuperror 2\", error);\n                    });\n            });\n\n\n\n        // const urlWorld = \"https://rawcdn.githack.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv\"\n        // const urlWorldD = \"https://rawcdn.githack.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv\"\n        const urlWorld = \"https://cdn.jsdelivr.net/gh/CSSEGISandData/COVID-19@master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv\"\n\n        const urlWorldD = \"https://cdn.jsdelivr.net/gh/CSSEGISandData/COVID-19@master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv\"\n\n        const processJHData = (url, key) =>{\n            const p = csv(url).then(data => {\n            const dd = d3a.cross(data.columns.slice(4), data, (ddate, d) => ({\n                    date: ddate,\n                    country: d[\"Country/Region\"],\n                    region: d[\"Province/State\"] ? d[\"Province/State\"] : null,\n                    value: parseFloat(d[ddate]),\n                    lat: parseFloat(d.Lat),\n                    lon: parseFloat(d.Long)\n                }));\n            const q = Array.from(\n                d3a.rollups(\n                    dd,\n                    d => d3a.sum(d, v => +v.value),\n                    d => d.country,\n                    d => d.date\n                )\n            );\n            const totals=q.map(x=>{\n                return {country: x[0], total:parseInt(x[1][x[1].length-1][1]) }\n            })\n            totals.sort((a,b)=>-a.total+b.total);\n            // console.log('q',q,totals)\n            const keepAmount = 20; //Number of countries for which to keep data\n            const keep = totals.slice(0,keepAmount).map(x=>x.country);\n            // console.log('keep', keep);\n            const out = [];\n            q.forEach(x => {\n                const country = x[0];\n                if(keep.includes(country)){\n                for (let i = 0; i < x[1].length; i++) {\n                    const total = i === 0 ? x[1][i][1] : x[1][i][1] - x[1][i - 1][1];\n                    if(i>0 && total==0){\n                        continue\n                    }\n                    out.push({\n                        Prov:country,\n                        Date: moment(x[1][i][0],\"M/DD/YY\"),\n                        Total: total\n                    });\n                }\n            }\n            });\n            const cfw = crossfilter(out);\n            const clonedData = JSON.parse(JSON.stringify(out));\n            clonedData.forEach(x => {\n                x.Date = moment(x.Date);\n            });\n            const cfwn = crossfilter(clonedData);\n            this.dims[key] = {\n                date: cfw.dimension(d => d.Date), \n                prov: cfw.dimension(d => d.Prov),\n                dateN: cfwn.dimension(d => d.Date), \n                provN: cfwn.dimension(d => d.Prov)\n            };\n            return out;\n        });\n        return p;\n        }\n\n        // Promise.all([p1, p2]).then(x => {\n        //     console.log(\"Done fetching data\");\n        //     this.setState({\n        //         loading: false,\n        //         hasCF: true,\n        //         detailData: x[0],\n        //         deathData: x[1]\n        //     });\n        // });\n        const p3 = processJHData(urlWorld, 'detailW');\n        const p4 = processJHData(urlWorldD, 'deathsW');\n        Promise.all([p1,p2, p3, p4]).then(x => {\n            console.log(\"Done fetching data\");\n\n            this.setState({\n                loading: false,\n                hasCF: true,\n                detailData: x[0],\n                deathData: x[1],\n                worldDetailData: x[2],\n                worldDeathData: x[3]\n            });\n        });\n    }\n    render() {\n        if (!this.state.hasCF) {\n            return null;\n        }\n        return (\n            <CXContext.Provider\n                value={{\n                    // cf: this.cf,\n                    // cfd: this.cfd,\n                    // cfn: this.cfn,\n                    // cfdn: this.cfdn\n                    // dimensions: this.dimensions,\n                    // dimensionsD: this.dimensionsD,\n                    dimensions: this.dims\n                }}\n            >\n                <div ref={this.parent}>{this.props.children}</div>\n            </CXContext.Provider>\n        );\n    }\n}\n","import { rgb } from \"d3-color\";\nimport { useState, useEffect } from \"react\";\nimport {popData}  from \"./data/country-by-population\";\n\nexport const colorf = () => {\n    //http://tsitsul.in/blog/coloropt/\n    const cols = [\n        [235, 172, 35],\n        [184, 0, 88],\n        [0, 140, 249],\n        [0, 110, 0],\n        [0, 187, 173],\n        [209, 99, 230],\n        [178, 69, 2],\n        [255, 146, 135],\n        [89, 84, 214],\n        [0, 198, 248],\n        [135, 133, 0],\n        [0, 167, 108],\n        [189, 189, 189]\n    ];\n    return cols.map(x =>\n        rgb(x[0], x[1], x[2])\n            .darker(.5)\n            .formatHex()\n    );\n};\n\nexport const sortpc = (provinces, colors) => {\n    const merged = [];\n    for (let i = 0; i < provinces.length; i++) {\n        merged.push({ a1: provinces[i], a2: colors[i] });\n    }\n    merged.sort((x, y) => x.a1.value - y.a1.value);\n    for (let i = 0; i < merged.length; i++) {\n        provinces[i] = merged[i].a1;\n        colors[i] = merged[i].a2;\n    }\n    // console.log(provinces, colors);\n};\n\nexport const population = {\n    ON: 14.71,\n    QC: 8.53,\n    BC: 5.11,\n    AB: 4.41,\n    SK: 1.18,\n    NL: 0.52,\n    NS: 0.98,\n    MB: 1.38,\n    NB: 0.78,\n    PE: 0.16,\n    YT: 0.041,\n    NT: 0.044,\n    NU: 0.039\n};\n\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height\n  };\n}\n\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n\nexport function totalReduce(group){\n    const res = group.reduce(\n            (p, v) => {\n                return p + v.Total;\n            },\n            (p, v) => {\n                return p - v.Total;\n            },\n            () => 0\n        );\n    return res;\n}\n\nexport function provinceTotalReduce(group){\n    const pCounts = group.reduce(\n        (p, v) => {\n            p[v.Prov] = (p[v.Prov] || 0) + v.Total;\n            return p;\n        },\n        (p, v) => {\n            p[v.Prov] = p[v.Prov] - v.Total;\n            return p;\n        },\n        () => ({})\n    );\n    return pCounts;\n}\n\nexport const populationW = {};\nconst renames = {\n    \"Czech Republic\":\"Czechia\",\n    \"United States\":\"US\"\n}\npopData.forEach(x=>{\n    const name = renames.hasOwnProperty(x.country)? renames[x.country]:x.country;\n    populationW[name]=(+x.population)/1e6;\n});","// from https://github.com/samayo/country-json/blob/master/src/country-by-population.json\nexport const popData = [\n    {\n        \"country\": \"Afghanistan\",\n        \"population\": \"35530081\"\n    },\n    {\n        \"country\": \"Albania\",\n        \"population\": \"2930187\"\n    },\n    {\n        \"country\": \"Algeria\",\n        \"population\": \"41318142\"\n    },\n    {\n        \"country\": \"American Samoa\",\n        \"population\": \"55641\"\n    },\n    {\n        \"country\": \"Andorra\",\n        \"population\": \"76965\"\n    },\n    {\n        \"country\": \"Angola\",\n        \"population\": \"29784193\"\n    },\n    {\n        \"country\": \"Anguilla\",\n        \"population\": \"14909\"\n    },\n    {\n        \"country\": \"Antarctica\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Antigua and Barbuda\",\n        \"population\": \"102012\"\n    },\n    {\n        \"country\": \"Argentina\",\n        \"population\": \"44271041\"\n    },\n    {\n        \"country\": \"Armenia\",\n        \"population\": \"2930450\"\n    },\n    {\n        \"country\": \"Aruba\",\n        \"population\": \"105264\"\n    },\n    {\n        \"country\": \"Australia\",\n        \"population\": \"24450561\"\n    },\n    {\n        \"country\": \"Austria\",\n        \"population\": \"8735453\"\n    },\n    {\n        \"country\": \"Azerbaijan\",\n        \"population\": \"9827589\"\n    },\n    {\n        \"country\": \"Bahamas\",\n        \"population\": \"395361\"\n    },\n    {\n        \"country\": \"Bahrain\",\n        \"population\": \"1492584\"\n    },\n    {\n        \"country\": \"Bangladesh\",\n        \"population\": \"164669751\"\n    },\n    {\n        \"country\": \"Barbados\",\n        \"population\": \"285719\"\n    },\n    {\n        \"country\": \"Belarus\",\n        \"population\": \"9468338\"\n    },\n    {\n        \"country\": \"Belgium\",\n        \"population\": \"11429336\"\n    },\n    {\n        \"country\": \"Belize\",\n        \"population\": \"374681\"\n    },\n    {\n        \"country\": \"Benin\",\n        \"population\": \"11175692\"\n    },\n    {\n        \"country\": \"Bermuda\",\n        \"population\": \"61349\"\n    },\n    {\n        \"country\": \"Bhutan\",\n        \"population\": \"807610\"\n    },\n    {\n        \"country\": \"Bolivia\",\n        \"population\": \"11051600\"\n    },\n    {\n        \"country\": \"Bosnia and Herzegovina\",\n        \"population\": \"3507017\"\n    },\n    {\n        \"country\": \"Botswana\",\n        \"population\": \"2291661\"\n    },\n    {\n        \"country\": \"Bouvet Island\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Brazil\",\n        \"population\": \"209288278\"\n    },\n    {\n        \"country\": \"British Indian Ocean Territory\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Brunei\",\n        \"population\": \"428697\"\n    },\n    {\n        \"country\": \"Bulgaria\",\n        \"population\": \"7084571\"\n    },\n    {\n        \"country\": \"Burkina Faso\",\n        \"population\": \"19193382\"\n    },\n    {\n        \"country\": \"Burundi\",\n        \"population\": \"10864245\"\n    },\n    {\n        \"country\": \"Cambodia\",\n        \"population\": \"16005373\"\n    },\n    {\n        \"country\": \"Cameroon\",\n        \"population\": \"24053727\"\n    },\n    {\n        \"country\": \"Canada\",\n        \"population\": \"36624199\"\n    },\n    {\n        \"country\": \"Cape Verde\",\n        \"population\": \"546388\"\n    },\n    {\n        \"country\": \"Cayman Islands\",\n        \"population\": \"61559\"\n    },\n    {\n        \"country\": \"Central African Republic\",\n        \"population\": \"4659080\"\n    },\n    {\n        \"country\": \"Chad\",\n        \"population\": \"14899994\"\n    },\n    {\n        \"country\": \"Chile\",\n        \"population\": \"18054726\"\n    },\n    {\n        \"country\": \"China\",\n        \"population\": \"1409517397\"\n    },\n    {\n        \"country\": \"Christmas Island\",\n        \"population\": \"2500\"\n    },\n    {\n        \"country\": \"Cocos (Keeling) Islands\",\n        \"population\": \"600\"\n    },\n    {\n        \"country\": \"Colombia\",\n        \"population\": \"49065615\"\n    },\n    {\n        \"country\": \"Comoros\",\n        \"population\": \"813912\"\n    },\n    {\n        \"country\": \"Congo\",\n        \"population\": \"5260750\"\n    },\n    {\n        \"country\": \"Cook Islands\",\n        \"population\": \"17380\"\n    },\n    {\n        \"country\": \"Costa Rica\",\n        \"population\": \"4905769\"\n    },\n    {\n        \"country\": \"Croatia\",\n        \"population\": \"4189353\"\n    },\n    {\n        \"country\": \"Cuba\",\n        \"population\": \"11484636\"\n    },\n    {\n        \"country\": \"Cyprus\",\n        \"population\": \"1179551\"\n    },\n    {\n        \"country\": \"Czech Republic\",\n        \"population\": \"10618303\"\n    },\n    {\n        \"country\": \"Denmark\",\n        \"population\": \"5733551\"\n    },\n    {\n        \"country\": \"Djibouti\",\n        \"population\": \"956985\"\n    },\n    {\n        \"country\": \"Dominica\",\n        \"population\": \"73925\"\n    },\n    {\n        \"country\": \"Dominican Republic\",\n        \"population\": \"10766998\"\n    },\n    {\n        \"country\": \"East Timor\",\n        \"population\": \"1296311\"\n    },\n    {\n        \"country\": \"Ecuador\",\n        \"population\": \"16624858\"\n    },\n    {\n        \"country\": \"Egypt\",\n        \"population\": \"97553151\"\n    },\n    {\n        \"country\": \"El Salvador\",\n        \"population\": \"6377853\"\n    },\n    {\n        \"country\": \"England\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Equatorial Guinea\",\n        \"population\": \"1267689\"\n    },\n    {\n        \"country\": \"Eritrea\",\n        \"population\": \"5068831\"\n    },\n    {\n        \"country\": \"Estonia\",\n        \"population\": \"1309632\"\n    },\n    {\n        \"country\": \"Ethiopia\",\n        \"population\": \"104957438\"\n    },\n    {\n        \"country\": \"Falkland Islands\",\n        \"population\": \"2910\"\n    },\n    {\n        \"country\": \"Faroe Islands\",\n        \"population\": \"49290\"\n    },\n    {\n        \"country\": \"Fiji Islands\",\n        \"population\": \"905502\"\n    },\n    {\n        \"country\": \"Finland\",\n        \"population\": \"5523231\"\n    },\n    {\n        \"country\": \"France\",\n        \"population\": \"64979548\"\n    },\n    {\n        \"country\": \"French Guiana\",\n        \"population\": \"282731\"\n    },\n    {\n        \"country\": \"French Polynesia\",\n        \"population\": \"283007\"\n    },\n    {\n        \"country\": \"French Southern territories\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Gabon\",\n        \"population\": \"2025137\"\n    },\n    {\n        \"country\": \"Gambia\",\n        \"population\": \"2100568\"\n    },\n    {\n        \"country\": \"Georgia\",\n        \"population\": \"3912061\"\n    },\n    {\n        \"country\": \"Germany\",\n        \"population\": \"82114224\"\n    },\n    {\n        \"country\": \"Ghana\",\n        \"population\": \"28833629\"\n    },\n    {\n        \"country\": \"Gibraltar\",\n        \"population\": \"34571\"\n    },\n    {\n        \"country\": \"Greece\",\n        \"population\": \"11159773\"\n    },\n    {\n        \"country\": \"Greenland\",\n        \"population\": \"56480\"\n    },\n    {\n        \"country\": \"Grenada\",\n        \"population\": \"107825\"\n    },\n    {\n        \"country\": \"Guadeloupe\",\n        \"population\": \"449568\"\n    },\n    {\n        \"country\": \"Guam\",\n        \"population\": \"164229\"\n    },\n    {\n        \"country\": \"Guatemala\",\n        \"population\": \"16913503\"\n    },\n    {\n        \"country\": \"Guinea\",\n        \"population\": \"12717176\"\n    },\n    {\n        \"country\": \"Guinea-Bissau\",\n        \"population\": \"1861283\"\n    },\n    {\n        \"country\": \"Guyana\",\n        \"population\": \"777859\"\n    },\n    {\n        \"country\": \"Haiti\",\n        \"population\": \"10981229\"\n    },\n    {\n        \"country\": \"Heard Island and McDonald Islands\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Holy See (Vatican City State)\",\n        \"population\": \"1000\"\n    },\n    {\n        \"country\": \"Honduras\",\n        \"population\": \"9265067\"\n    },\n    {\n        \"country\": \"Hong Kong\",\n        \"population\": \"7364883\"\n    },\n    {\n        \"country\": \"Hungary\",\n        \"population\": \"9721559\"\n    },\n    {\n        \"country\": \"Iceland\",\n        \"population\": \"335025\"\n    },\n    {\n        \"country\": \"India\",\n        \"population\": \"1339180127\"\n    },\n    {\n        \"country\": \"Indonesia\",\n        \"population\": \"263991379\"\n    },\n    {\n        \"country\": \"Iran\",\n        \"population\": \"81162788\"\n    },\n    {\n        \"country\": \"Iraq\",\n        \"population\": \"38274618\"\n    },\n    {\n        \"country\": \"Ireland\",\n        \"population\": \"4761657\"\n    },\n    {\n        \"country\": \"Israel\",\n        \"population\": \"8321570\"\n    },\n    {\n        \"country\": \"Italy\",\n        \"population\": \"59359900\"\n    },\n    {\n        \"country\": \"Ivory Coast\",\n        \"population\": \"24294750\"\n    },\n    {\n        \"country\": \"Jamaica\",\n        \"population\": \"2890299\"\n    },\n    {\n        \"country\": \"Japan\",\n        \"population\": \"127484450\"\n    },\n    {\n        \"country\": \"Jordan\",\n        \"population\": \"9702353\"\n    },\n    {\n        \"country\": \"Kazakhstan\",\n        \"population\": \"18204499\"\n    },\n    {\n        \"country\": \"Kenya\",\n        \"population\": \"49699862\"\n    },\n    {\n        \"country\": \"Kiribati\",\n        \"population\": \"116398\"\n    },\n    {\n        \"country\": \"Kuwait\",\n        \"population\": \"4136528\"\n    },\n    {\n        \"country\": \"Kyrgyzstan\",\n        \"population\": \"6045117\"\n    },\n    {\n        \"country\": \"Laos\",\n        \"population\": \"6858160\"\n    },\n    {\n        \"country\": \"Latvia\",\n        \"population\": \"1949670\"\n    },\n    {\n        \"country\": \"Lebanon\",\n        \"population\": \"6082357\"\n    },\n    {\n        \"country\": \"Lesotho\",\n        \"population\": \"2233339\"\n    },\n    {\n        \"country\": \"Liberia\",\n        \"population\": \"4731906\"\n    },\n    {\n        \"country\": \"Libyan Arab Jamahiriya\",\n        \"population\": \"5605000\"\n    },\n    {\n        \"country\": \"Liechtenstein\",\n        \"population\": \"37922\"\n    },\n    {\n        \"country\": \"Lithuania\",\n        \"population\": \"2890297\"\n    },\n    {\n        \"country\": \"Luxembourg\",\n        \"population\": \"583455\"\n    },\n    {\n        \"country\": \"Macao\",\n        \"population\": \"473000\"\n    },\n    {\n        \"country\": \"North Macedonia\",\n        \"population\": \"2024000\"\n    },\n    {\n        \"country\": \"Madagascar\",\n        \"population\": \"25570895\"\n    },\n    {\n        \"country\": \"Malawi\",\n        \"population\": \"18622104\"\n    },\n    {\n        \"country\": \"Malaysia\",\n        \"population\": \"31624264\"\n    },\n    {\n        \"country\": \"Maldives\",\n        \"population\": \"436330\"\n    },\n    {\n        \"country\": \"Mali\",\n        \"population\": \"18541980\"\n    },\n    {\n        \"country\": \"Malta\",\n        \"population\": \"430835\"\n    },\n    {\n        \"country\": \"Marshall Islands\",\n        \"population\": \"53127\"\n    },\n    {\n        \"country\": \"Martinique\",\n        \"population\": \"384896\"\n    },\n    {\n        \"country\": \"Mauritania\",\n        \"population\": \"4420184\"\n    },\n    {\n        \"country\": \"Mauritius\",\n        \"population\": \"1265138\"\n    },\n    {\n        \"country\": \"Mayotte\",\n        \"population\": \"253045\"\n    },\n    {\n        \"country\": \"Mexico\",\n        \"population\": \"129163276\"\n    },\n    {\n        \"country\": \"Micronesia, Federated States of\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Moldova\",\n        \"population\": \"4051212\"\n    },\n    {\n        \"country\": \"Monaco\",\n        \"population\": \"38695\"\n    },\n    {\n        \"country\": \"Mongolia\",\n        \"population\": \"3075647\"\n    },\n    {\n        \"country\": \"Montserrat\",\n        \"population\": \"5177\"\n    },\n    {\n        \"country\": \"Morocco\",\n        \"population\": \"35739580\"\n    },\n    {\n        \"country\": \"Mozambique\",\n        \"population\": \"29668834\"\n    },\n    {\n        \"country\": \"Myanmar\",\n        \"population\": \"53370609\"\n    },\n    {\n        \"country\": \"Namibia\",\n        \"population\": \"2533794\"\n    },\n    {\n        \"country\": \"Nauru\",\n        \"population\": \"11359\"\n    },\n    {\n        \"country\": \"Nepal\",\n        \"population\": \"29304998\"\n    },\n    {\n        \"country\": \"Netherlands\",\n        \"population\": \"17035938\"\n    },\n    {\n        \"country\": \"Netherlands Antilles\",\n        \"population\": \"217000\"\n    },\n    {\n        \"country\": \"New Caledonia\",\n        \"population\": \"276255\"\n    },\n    {\n        \"country\": \"New Zealand\",\n        \"population\": \"4705818\"\n    },\n    {\n        \"country\": \"Nicaragua\",\n        \"population\": \"6217581\"\n    },\n    {\n        \"country\": \"Niger\",\n        \"population\": \"21477348\"\n    },\n    {\n        \"country\": \"Nigeria\",\n        \"population\": \"190886311\"\n    },\n    {\n        \"country\": \"Niue\",\n        \"population\": \"1618\"\n    },\n    {\n        \"country\": \"Norfolk Island\",\n        \"population\": \"2000\"\n    },\n    {\n        \"country\": \"North Korea\",\n        \"population\": \"25490965\"\n    },\n    {\n        \"country\": \"Northern Ireland\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Northern Mariana Islands\",\n        \"population\": \"55144\"\n    },\n    {\n        \"country\": \"Norway\",\n        \"population\": \"5305383\"\n    },\n    {\n        \"country\": \"Oman\",\n        \"population\": \"4636262\"\n    },\n    {\n        \"country\": \"Pakistan\",\n        \"population\": \"197015955\"\n    },\n    {\n        \"country\": \"Palau\",\n        \"population\": \"21729\"\n    },\n    {\n        \"country\": \"Palestine\",\n        \"population\": \"4920724\"\n    },\n    {\n        \"country\": \"Panama\",\n        \"population\": \"4098587\"\n    },\n    {\n        \"country\": \"Papua New Guinea\",\n        \"population\": \"8251162\"\n    },\n    {\n        \"country\": \"Paraguay\",\n        \"population\": \"6811297\"\n    },\n    {\n        \"country\": \"Peru\",\n        \"population\": \"32165485\"\n    },\n    {\n        \"country\": \"Philippines\",\n        \"population\": \"104918090\"\n    },\n    {\n        \"country\": \"Pitcairn\",\n        \"population\": \"50\"\n    },\n    {\n        \"country\": \"Poland\",\n        \"population\": \"38170712\"\n    },\n    {\n        \"country\": \"Portugal\",\n        \"population\": \"10329506\"\n    },\n    {\n        \"country\": \"Puerto Rico\",\n        \"population\": \"3663131\"\n    },\n    {\n        \"country\": \"Qatar\",\n        \"population\": \"2639211\"\n    },\n    {\n        \"country\": \"Reunion\",\n        \"population\": \"699000\"\n    },\n    {\n        \"country\": \"Romania\",\n        \"population\": \"19679306\"\n    },\n    {\n        \"country\": \"Russian Federation\",\n        \"population\": \"143989754\"\n    },\n    {\n        \"country\": \"Rwanda\",\n        \"population\": \"12208407\"\n    },\n    {\n        \"country\": \"Saint Helena\",\n        \"population\": \"4049\"\n    },\n    {\n        \"country\": \"Saint Kitts and Nevis\",\n        \"population\": \"55345\"\n    },\n    {\n        \"country\": \"Saint Lucia\",\n        \"population\": \"178844\"\n    },\n    {\n        \"country\": \"Saint Pierre and Miquelon\",\n        \"population\": \"6320\"\n    },\n    {\n        \"country\": \"Saint Vincent and the Grenadines\",\n        \"population\": \"109897\"\n    },\n    {\n        \"country\": \"Samoa\",\n        \"population\": \"196440\"\n    },\n    {\n        \"country\": \"San Marino\",\n        \"population\": \"33400\"\n    },\n    {\n        \"country\": \"Sao Tome and Principe\",\n        \"population\": \"204327\"\n    },\n    {\n        \"country\": \"Saudi Arabia\",\n        \"population\": \"32938213\"\n    },\n    {\n        \"country\": \"Scotland\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Senegal\",\n        \"population\": \"15850567\"\n    },\n    {\n        \"country\": \"Seychelles\",\n        \"population\": \"94737\"\n    },\n    {\n        \"country\": \"Sierra Leone\",\n        \"population\": \"7557212\"\n    },\n    {\n        \"country\": \"Singapore\",\n        \"population\": \"5708844\"\n    },\n    {\n        \"country\": \"Slovakia\",\n        \"population\": \"5447662\"\n    },\n    {\n        \"country\": \"Slovenia\",\n        \"population\": \"2079976\"\n    },\n    {\n        \"country\": \"Solomon Islands\",\n        \"population\": \"611343\"\n    },\n    {\n        \"country\": \"Somalia\",\n        \"population\": \"14742523\"\n    },\n    {\n        \"country\": \"South Africa\",\n        \"population\": \"56717156\"\n    },\n    {\n        \"country\": \"South Georgia and the South Sandwich Islands\",\n        \"population\": null\n    },\n    {\n        \"country\": \"South Korea\",\n        \"population\": \"50982212\"\n    },\n    {\n        \"country\": \"South Sudan\",\n        \"population\": \"12575714\"\n    },\n    {\n        \"country\": \"Spain\",\n        \"population\": \"46354321\"\n    },\n    {\n        \"country\": \"SriLanka\",\n        \"population\": \"20876917\"\n    },\n    {\n        \"country\": \"Sudan\",\n        \"population\": \"40533330\"\n    },\n    {\n        \"country\": \"Suriname\",\n        \"population\": \"563402\"\n    },\n    {\n        \"country\": \"Svalbard and Jan Mayen\",\n        \"population\": \"3200\"\n    },\n    {\n        \"country\": \"Swaziland\",\n        \"population\": \"1008000\"\n    },\n    {\n        \"country\": \"Sweden\",\n        \"population\": \"9910701\"\n    },\n    {\n        \"country\": \"Switzerland\",\n        \"population\": \"8476005\"\n    },\n    {\n        \"country\": \"Syria\",\n        \"population\": \"18269868\"\n    },\n    {\n        \"country\": \"Tajikistan\",\n        \"population\": \"8921343\"\n    },\n    {\n        \"country\": \"Tanzania\",\n        \"population\": \"57310019\"\n    },\n    {\n        \"country\": \"Thailand\",\n        \"population\": \"69037513\"\n    },\n    {\n        \"country\": \"The Democratic Republic of Congo\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Togo\",\n        \"population\": \"7797694\"\n    },\n    {\n        \"country\": \"Tokelau\",\n        \"population\": \"1300\"\n    },\n    {\n        \"country\": \"Tonga\",\n        \"population\": \"108020\"\n    },\n    {\n        \"country\": \"Trinidad and Tobago\",\n        \"population\": \"1369125\"\n    },\n    {\n        \"country\": \"Tunisia\",\n        \"population\": \"11532127\"\n    },\n    {\n        \"country\": \"Turkey\",\n        \"population\": \"80745020\"\n    },\n    {\n        \"country\": \"Turkmenistan\",\n        \"population\": \"5758075\"\n    },\n    {\n        \"country\": \"Turks and Caicos Islands\",\n        \"population\": \"35446\"\n    },\n    {\n        \"country\": \"Tuvalu\",\n        \"population\": \"11192\"\n    },\n    {\n        \"country\": \"Uganda\",\n        \"population\": \"42862958\"\n    },\n    {\n        \"country\": \"Ukraine\",\n        \"population\": \"44222947\"\n    },\n    {\n        \"country\": \"United Arab Emirates\",\n        \"population\": \"9400145\"\n    },\n    {\n        \"country\": \"United Kingdom\",\n        \"population\": \"66181585\"\n    },\n    {\n        \"country\": \"United States\",\n        \"population\": \"324459463\"\n    },\n    {\n        \"country\": \"United States Minor Outlying Islands\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Uruguay\",\n        \"population\": \"3456750\"\n    },\n    {\n        \"country\": \"Uzbekistan\",\n        \"population\": \"31910641\"\n    },\n    {\n        \"country\": \"Vanuatu\",\n        \"population\": \"276244\"\n    },\n    {\n        \"country\": \"Venezuela\",\n        \"population\": \"31977065\"\n    },\n    {\n        \"country\": \"Vietnam\",\n        \"population\": \"95540800\"\n    },\n    {\n        \"country\": \"Virgin Islands, British\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Virgin Islands, U.S.\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Wales\",\n        \"population\": null\n    },\n    {\n        \"country\": \"Wallis and Futuna\",\n        \"population\": \"11773\"\n    },\n    {\n        \"country\": \"Western Sahara\",\n        \"population\": \"552628\"\n    },\n    {\n        \"country\": \"Yemen\",\n        \"population\": \"28250420\"\n    },\n    {\n        \"country\": \"Yugoslavia\",\n        \"population\": \"10640000\"\n    },\n    {\n        \"country\": \"Zambia\",\n        \"population\": \"17094130\"\n    },\n    {\n        \"country\": \"Zimbabwe\",\n        \"population\": \"16529904\"\n    }\n]","import React, { Fragment } from \"react\";\nimport { CXContext } from \"./cxContext\";\nimport * as dc from \"dc\";\nimport { css } from \"glamor\";\nimport { Header, Label, Icon, Popup } from \"semantic-ui-react\";\nimport { useWindowDimensions} from \"../util\";\n\nconst ResetButton = props => {\n    const style = css({\n        cursor: \"pointer\"\n    });\n    return (\n        <Label\n            {...style}\n            onClick={() => {\n                props.chart.filterAll();\n                dc.redrawAll();\n            }}\n        >\n            reset\n        </Label>\n    );\n};\nexport const ChartTemplate = props => {\n    const context = React.useContext(CXContext);\n    const [chart, updateChart] = React.useState(null);\n    const [chartData, updateChartData] = React.useState({'a':1, 'b':0});\n    let dims = context.dimensions[props.params.usedata];\n    // if (props.params.usedata === \"detail\") {\n    //     dims = context.dimensions;\n    // } else if (props.params.usedata === \"deaths\") {\n    //     dims = context.dimensionsD;\n    // }\n    const div = React.useRef(null);\n    const windowSize = useWindowDimensions()\n    React.useEffect(() => {\n        const newChart = props.chartFunction(div.current, dims, props.params, windowSize, chartData, updateChartData);\n\n        newChart.render();\n        updateChart(newChart);\n    }, [props.params, windowSize]);\n\n    let button;\n    let label;\n    if (props.reset) {\n        button = <ResetButton chart={chart} />;\n        label= <Popup content=\"Pick province(s) to filter results and click Reset to restore defaults\" trigger={<Label circular color='teal'>?</Label>}/>\n    }\n    let header;\n    if (props.title) {\n        header = (\n            <Header as=\"h3\">\n                {props.title}\n                {button}\n                {label}\n            </Header>\n        );\n    }\n\n    return (\n        <Fragment>\n            {header}\n            <div ref={div}></div>\n        </Fragment>\n    );\n};\n","import React from \"react\";\nimport * as dc from \"dc\";\nimport { ChartTemplate } from \"./chartTemplate\";\nimport { colorf, sortpc, population, totalReduce, populationW} from \"../util\";\n\nconst provinceChartFunc = (\n    divRef,\n    dimensions,\n    params,\n    windowSize,\n    chartData,\n    updateChartData\n) => {\n    const chartW0 = 350;\n    const chartH0 = 300;\n    if (chartData.hasOwnProperty(\"chart\")) {\n        const chart = chartData.chart;\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n        chart.width(chartW).height(chartH);\n        return chart;\n    } else {\n        let dimension;\n        if (params.normalize) {\n            dimension = dimensions[\"provN\"];\n        } else {\n            dimension = dimensions[\"prov\"];\n        }\n        const group = dimension.group();\n        const colors = colorf();\n        // const provinces = totalReduce(group).all()\n        const provinces = totalReduce(group).top(10)\n        sortpc(provinces, colors);\n        const chartGroup = `${params.usedata}_${params.loc}_${params.normalize?\"normalized\":\"base\"}`\n        const provinceChart = dc.rowChart(divRef, chartGroup);\n        const normalize = params.normalize;\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n        const popData = params.loc===\"Country\"?populationW:population;\n        provinceChart\n            .width(chartW)\n            .height(chartH)\n            .margins({ top: 10, right: 50, bottom: 30, left: 40 })\n            .dimension(dimension)\n            .group(group)\n            .cap(13)\n            .elasticX(true)\n            .othersGrouper(false)\n            // .labelOffsetX(-25)\n            .valueAccessor(x =>{\n                // console.log(x, params);\n                return normalize ? x.value / popData[x.key] : x.value}\n            )\n            .ordinalColors(\n                colors.slice(0, Object.keys(provinces).length).reverse()\n            );\n\n        provinceChart.xAxis().ticks(5);\n\n        updateChartData({ chart: provinceChart });\n        return provinceChart;\n    }\n};\n\nexport const ProvinceChart = props => {\n    return (\n        <ChartTemplate\n            chartFunction={provinceChartFunc}\n            title={props.params.loc + \" totals\"}\n            reset={true}\n            params={props.params}\n        />\n    );\n};\n","import React from \"react\";\nimport * as dc from \"dc\";\nimport { ChartTemplate } from \"./chartTemplate\";\nimport { scaleTime, format } from \"d3\";\nimport moment from \"moment\";\nimport { colorf, sortpc, totalReduce, provinceTotalReduce } from \"../util\";\n\nconst timeChartFunc = (\n    divRef,\n    dimensions,\n    params,\n    windowSize,\n    chartData,\n    updateChartData\n) => {\n\n    const chartH0 = 350;\n    const chartW0 = 475;\n    if (chartData.hasOwnProperty(\"chart\")) {\n        const chart = chartData.chart;\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n\n        chart.width(chartW).height(chartH);\n        return chart;\n    } else {\n        let dimension;\n        let pgroup;\n        let group;\n        if (params.normalize) {\n            dimension = dimensions[\"dateN\"];\n            pgroup = dimensions[\"provN\"].group();\n            group = dimension.group();\n        } else {\n            dimension = dimensions[\"date\"];\n            pgroup = dimensions[\"prov\"].group();\n            group = dimension.group();\n        }\n        const stack = params.stacked;\n        let chartGroup = group;\n        const colors = colorf();\n        if (stack) {\n            const pCounts = provinceTotalReduce(group);\n            function accumulate_group(source_group) {\n                return {\n                    all: function() {\n                        const sa = source_group.all();\n                        const cumulate = {};\n                        const res = [];\n                        for (const el of sa) {\n                            for (let [k, v] of Object.entries(el.value)) {\n                                cumulate[k] = (cumulate[k] || 0) + v;\n                            }\n                            res.push({ key: el.key, value: { ...cumulate } });\n                        }\n                        return res;\n                    }\n                };\n            }\n            const ag = accumulate_group(pCounts);\n            chartGroup = ag;\n        } else {\n            function accumulate_group(source_group) {\n                return {\n                    all: function() {\n                        const sa = source_group.all();\n                        let cumulate = 0;\n                        const res = [];\n                        for (const el of sa) {\n                            cumulate += el.value;\n                            res.push({ key: el.key, value: cumulate });\n                        }\n                        return res;\n                    }\n                };\n            }\n            const tCount = totalReduce(group);\n            chartGroup = accumulate_group(tCount);\n        }\n        // const provinces = totalReduce(pgroup).all();\n        const provinces = totalReduce(pgroup).top(13);\n        //sort provinces and colors together\n        sortpc(provinces, colors);\n        const smallestProvince = provinces[0].key;\n        const sel = i => {\n            return d => d.value[i] || 0;\n        };\n\n        const dcchartGroup = `${params.usedata}_${params.loc}_${params.normalize?\"normalized\":\"base\"}`\n        const timeChart = dc.lineChart(divRef, dcchartGroup);\n\n        if (stack) {\n            timeChart\n                .dimension(dimension)\n                .group(chartGroup, smallestProvince, sel(smallestProvince))//.top(10);\n        } else {\n            timeChart.dimension(dimension).group(chartGroup)//.top(10);\n        }\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n\n        timeChart\n            .renderArea(true)\n            .elasticY(true)\n            .width(chartW)\n            .height(chartH)\n            .brushOn(false)\n            .clipPadding(10)\n            .margins({ left: 40, top: 10, right: 10, bottom: 20 })\n            // .renderDataPoints({ radius: 0, fillOpacity: 1 })\n            .xyTipsOn(true)\n            .x(\n                scaleTime().domain([\n                    new Date(2020, 2, 1),\n                    moment().add(1, \"day\")\n                ])\n            )\n            .ordinalColors(colors)\n            .xAxis()\n            .ticks(8)\n            .tickFormat(v => moment(v).format(\"DD/MM\"));\n\n        timeChart.yAxis().tickFormat(v=>format(\".2s\")(v));\n        if (stack) {\n            for (const p of provinces.slice(1)) {\n                const pk = p.key;\n                timeChart.stack(chartGroup, pk, sel(pk));\n            }\n        }\n        updateChartData({ 'chart': timeChart });\n        return timeChart;\n    }\n};\n\nexport const TimeChart = props => {\n    return (\n        <ChartTemplate\n            chartFunction={timeChartFunc}\n            title=\"Cumulative\"\n            params={props.params}\n        />\n    );\n};\n","import React from \"react\";\nimport * as dc from \"dc\";\nimport { ChartTemplate } from \"./chartTemplate\";\nimport { colorf, sortpc, totalReduce, provinceTotalReduce } from \"../util\";\n\nconst statNumberFunc = (divRef, dimensions, params) => {\n    const dimension = dimensions[\"date\"];\n    let group;\n    let getValue;\n    if (params.total) {\n        group = dimension.groupAll().reduceSum(x=>x.Total);\n        getValue = x => x;\n    } else {\n        group = totalReduce(dimension.group());\n        getValue = x => x.value;\n    }\n    const quarterChart = dc.numberDisplay(divRef);\n    quarterChart\n        .valueAccessor(getValue)\n        .ordering(x => x.key)\n        .group(group);\n    return quarterChart;\n};\n\nexport const StatNumber = props => {\n    return (\n        <ChartTemplate\n            chartFunction={statNumberFunc}\n            title=\"\"\n            params={props.params}\n        />\n    );\n};\n","import React from \"react\";\nimport * as dc from \"dc\";\nimport { ChartTemplate } from \"./chartTemplate\";\nimport { scaleTime, format } from \"d3\";\nimport moment from \"moment\";\nimport { colorf, sortpc, totalReduce, provinceTotalReduce } from \"../util\";\n\nconst dailyTimeChartFunc = (\n    divRef,\n    dimensions,\n    params,\n    windowSize,\n    chartData,\n    updateChartData\n) => {\n    const chartH0 = 350;\n    const chartW0 = 475;\n\n    if (chartData.hasOwnProperty(\"chart\")) {\n        const chart = chartData.chart;\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n\n        chart.width(chartW).height(chartH);\n        return chart;\n    } else {\n        let dimension;\n        let pdim;\n        if (params.normalize) {\n            dimension = dimensions[\"dateN\"];\n            pdim = dimensions[\"provN\"];\n        } else {\n            dimension = dimensions[\"date\"];\n            pdim = dimensions[\"prov\"];\n        }\n        const group = dimension.group();\n        const stack = params.stacked;\n        let chartGroup = group;\n        const provincesG = totalReduce(pdim.group());\n        if (stack) {\n            const pCounts = provinceTotalReduce(group);\n            chartGroup = pCounts;\n        }\n        else{\n            chartGroup = totalReduce(group);\n        }\n        const sel = i => {\n            return d => d.value[i] || 0;\n        };\n\n        const colors = colorf();\n        // const provinces = provincesG.all();\n        const provinces = provincesG.top(13);\n        sortpc(provinces, colors);\n\n        const dcchartGroup = `${params.usedata}_${params.loc}_${params.normalize?\"normalized\":\"base\"}`\n        const timeChart = dc.lineChart(divRef, dcchartGroup);\n\n        const smallestProvince = provinces[0].key;\n        if (stack) {\n            timeChart\n                .dimension(dimension)\n                .group(chartGroup, smallestProvince, sel(smallestProvince));\n        } else {\n            timeChart.dimension(dimension).group(chartGroup);\n        }\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n        timeChart\n            .renderArea(true)\n            .elasticY(true)\n            .width(chartW)\n            .height(chartH)\n            .brushOn(false)\n            .clipPadding(10)\n            .margins({ left: 40, top: 10, right: 10, bottom: 20 })\n            // .renderDataPoints({ radius: 2, fillOpacity: 1 })\n            .ordinalColors(colors)\n            .x(\n                scaleTime().domain([\n                    new Date(2020, 2, 1),\n                    moment().add(1, \"day\")\n                ])\n            )\n            .xAxis()\n            .ticks(5)\n            .tickFormat(v => moment(v).format(\"DD/MM\"));\n\n        timeChart.yAxis().tickFormat(v=>format(\".2s\")(v));\n        if (stack) {\n            for (const p of provinces.slice(1)) {\n                const pk = p.key;\n                timeChart.stack(chartGroup, pk, sel(pk));\n            }\n        }\n\n        updateChartData({ 'chart': timeChart });\n        return timeChart;\n    }\n};\n\nexport const DailyTimeChart = props => {\n    return (\n        <ChartTemplate\n            chartFunction={dailyTimeChartFunc}\n            title=\"Daily\"\n            params={props.params}\n        />\n    );\n};\n","import React from \"react\";\nimport * as dc from \"dc\";\nimport { ChartTemplate } from \"./chartTemplate\";\nimport { scaleTime } from \"d3\";\nimport moment from \"moment\";\nimport { colorf, sortpc, population, populationW, totalReduce, provinceTotalReduce } from \"../util\";\n\nconst timeChartFunc = (divRef, dimensions, params, windowSize, chartData, updateChartData) => {\n    const chartH0 = 350;\n    const chartW0 = 475;\n\n    if (chartData.hasOwnProperty(\"chart\")) {\n        const chart = chartData.chart;\n\n        const chartW = (windowSize.width / 1440) * chartW0;\n        const chartH = (windowSize.width / 1440) * chartH0;\n\n        chart.width(chartW).height(chartH);\n        return chart;\n    } else {\n    let dimension;\n    let pdim;\n    dimension = dimensions['dateN'];\n    pdim = dimensions['provN'];\n    const group = dimension.group();\n    let chartGroup = group;\n    const colors = colorf();\n    const popData = params.loc===\"Country\"?populationW:population;\n    const pCounts = group.reduce(\n        (p, v) => {\n            p[v.Prov] = (p[v.Prov] || 0) + v.Total / popData[v.Prov];\n            return p;\n        },\n        (p, v) => {\n            p[v.Prov] = p[v.Prov] - v.Total / popData[v.Prov];\n            return p;\n        },\n        () => ({})\n    );\n    function accumulate_group(source_group) {\n        return {\n            all: function() {\n                const sa = source_group.all();\n                const cumulate = {};\n                const res = [];\n                for (const el of sa) {\n                    for (let [k, v] of Object.entries(el.value)) {\n                        cumulate[k] = (cumulate[k] || 0) + v;\n                    }\n                    res.push({ key: el.key, value: { ...cumulate } });\n                }\n                return res;\n            }\n        };\n    }\n    const ag = accumulate_group(pCounts);\n    chartGroup = ag;\n    const provinces = totalReduce(pdim.group()).top(13);\n    // const provinces = pdim.group().all();\n    // const provinces = ag.top(13);\n    //sort provinces and colors together\n    sortpc(provinces, colors);\n    const smallestProvince = provinces[0].key;\n    const sel = i => {\n        return d => d.value[i] || 0;\n    };\n\n    const dcchartGroup = `${params.usedata}_${params.loc}_${params.normalize?\"normalized\":\"base\"}`\n    const timeChart = dc.compositeChart(divRef, dcchartGroup);\n\n    const charts = [];\n\n    // for(const p of provinces) {\n    // for(let i of provinces) {\n    provinces.forEach((el, ix) => {\n        const pk = el.key;\n        const color = colors[ix];\n        charts.push(\n            dc\n                .lineChart(timeChart)\n                .dimension(dimension)\n                .group(chartGroup, pk, sel(pk))\n                .colors(color)\n            )\n            // .renderDataPoints({ radius: 2, fillOpacity: 1 })\n    });\n    \n    const    chartW = windowSize.width/1440 * chartW0;\n    const    chartH = windowSize.width/1440 * chartH0;\n    timeChart\n        // .renderArea(true)\n        .elasticY(true)\n        .width(chartW)\n        .height(chartH)\n        .brushOn(false)\n        .clipPadding(10)\n        .margins({ left: 50, top: 10, right: 10, bottom: 20 })\n        .x(scaleTime().domain([new Date(2020, 2, 1), moment().add(1, \"day\")]))\n        .compose(charts);\n\n    timeChart\n        .xAxis()\n        .ticks(5)\n        .tickFormat(v => moment(v).format(\"DD/MM\"));\n\n    updateChartData({ 'chart': timeChart });\n    return timeChart;\n}\n};\n\nexport const NormalizedChart = props => {\n    return (\n        <ChartTemplate chartFunction={timeChartFunc} params={props.params} />\n    );\n};\n","import React, { Fragment } from \"react\";\nimport { CXContext } from \"./cxContext\";\nimport moment from \"moment\";\n\nexport const LastDateDisplay = props => {\n    const context = React.useContext(CXContext);\n    // if (props.params.usedata === \"detail\") {\n    //     dimension = context.dimensions['date'];\n    // } else if (props.params.usedata === \"deaths\") {\n    //     dimension = context.dimensionsD['date'];\n    // }\n    const dimension = context.dimensions[props.params.usedata]['date'];\n    // const dimension = cf.dimension(d => d.Date);\n    const group = dimension.group();\n    const vals = group.all();\n    const last = moment.max(vals.map(x => x.key)).format(\"D-MMM\");\n\n    return <Fragment>{last}</Fragment>;\n};\n","import React, {Fragment} from \"react\";\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport { ProvinceChart } from \"./provinceChart\";\nimport { TimeChart } from \"./timeChart\";\nimport { StatNumber } from \"./statNumber\";\nimport { DailyTimeChart } from \"./dailyTimeChart\";\nimport { NormalizedChart } from \"./normalizedChart\";\nimport { LastDateDisplay } from \"./textDisplay\";\nimport {\n    Grid,\n    Tab,\n    Segment,\n    Label,\n    Statistic,\n    StatisticValue,\n    StatisticLabel,\n    GridRow,\n    Header,\n    HeaderContent,\n    Icon\n} from \"semantic-ui-react\";\n\nexport const CanadaDashboard = props => {\n    const panes_cumulative = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={1}>\n                    <TimeChart params={{ stacked: true, usedata: \"detailC\" ,loc:\"Province\"  }} />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={2}>\n                    <TimeChart params={{ stacked: false, usedata: \"detailC\" ,loc:\"Province\"  }} />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const panes_daily = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={3}>\n                    <DailyTimeChart\n                        params={{ stacked: true, usedata: \"detailC\" ,loc:\"Province\"  }}\n                    />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={4}>\n                    <DailyTimeChart\n                        params={{ stacked: false, usedata: \"detailC\" ,loc:\"Province\"  }}\n                    />\n                </Tab.Pane>\n            )\n        }\n    ];\n\n    const cases = (\n        <Grid>\n            <Grid.Row columns={16}>\n                {/* <GenderChart/>\n            <AgeChart/> */}\n                <Grid.Column width={4}>\n                    {/* <Checkbox toggle label=\"Normalize to population\"></Checkbox> */}\n                    <Grid>\n                        <GridRow centered columns={1}>\n                            <Grid.Column width={6}>\n                                <Statistic centered size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"detailC\",\n                                                total: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>Total cases</StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"detailC\",\n                                                total: false,\n                                                date: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>New cases</StatisticLabel>\n                                    <StatisticLabel>\n                                        On{\" \"}\n                                        <LastDateDisplay\n                                            params={{ usedata: \"detailC\" }}\n                                        />\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                        </GridRow>\n\n                        <Grid.Column width={16}>\n                            <Segment>\n                                <ProvinceChart params={{ usedata: \"detailC\",loc:\"Province\"  }} />\n                            </Segment>\n                        </Grid.Column>\n                    </Grid>\n                    {/* </Grid> */}\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_cumulative}\n                        renderActiveOnly={false}\n                    />\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_daily}\n                        renderActiveOnly={false}\n                    />\n                    {/* <DailyTimeChart params={{usedata:'detailC'}}/> */}\n                </Grid.Column>\n            </Grid.Row>\n            <Grid.Row columns={2}>\n                <Grid.Column>{/* <OriginChart/> */}</Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const panes_cumulative_d = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={11}>\n                    <TimeChart params={{ stacked: true, usedata: \"deathC\" ,loc:\"Province\"  }} />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={12}>\n                    <TimeChart params={{ stacked: false, usedata: \"deathC\" ,loc:\"Province\"  }} />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const panes_daily_d = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={13}>\n                    <DailyTimeChart\n                        params={{ stacked: true, usedata: \"deathC\" ,loc:\"Province\"  }}\n                    />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={14}>\n                    <DailyTimeChart\n                        params={{ stacked: false, usedata: \"deathC\" ,loc:\"Province\"  }}\n                    />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const deaths = (\n        <Grid>\n            <Grid.Row columns={16}>\n                {/* <GenderChart/>\n            <AgeChart/> */}\n                <Grid.Column width={4}>\n                    <Grid>\n                        <GridRow centered columns={3}>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"deathC\",\n                                                total: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>\n                                        Total casualties\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"deathC\",\n                                                total: false,\n                                                date: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>New casualties</StatisticLabel>\n                                    <StatisticLabel>\n                                        On{\" \"}\n                                        <LastDateDisplay\n                                            params={{ usedata: \"deathC\" }}\n                                        />\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                        </GridRow>\n                        <Grid.Column width={16}>\n                            <Segment>\n                                <ProvinceChart params={{ usedata: \"deathC\",loc:\"Province\" }} />\n                            </Segment>\n                        </Grid.Column>\n                    </Grid>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_cumulative_d}\n                        renderActiveOnly={false}\n                    />\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_daily_d}\n                        renderActiveOnly={false}\n                    />\n                    {/* <DailyTimeChart params={{usedata:'detailC'}}/> */}\n                </Grid.Column>\n            </Grid.Row>\n            <Grid.Row columns={2}>\n                <Grid.Column>{/* <OriginChart/> */}</Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n\n    const normalized = (\n        <Grid>\n            <GridRow centered>\n                {/* <Grid.Column width={10}> */}\n                <Header as=\"h2\">CASES PER 1M</Header>\n                {/* </Grid.Column> */}\n            </GridRow>\n            <Grid.Row centered columns={5}>\n                <Grid.Column width={4}>\n                    <Segment>\n                        <ProvinceChart\n                            params={{ usedata: \"detailC\", normalize: true, loc:\"Province\" }}\n                        />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Segment>\n                        <NormalizedChart\n                            params={{ usedata: \"detailC\", normalize: true, loc:\"Province\" }}\n                        />\n                    </Segment>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const normalizedd = (\n        <Grid>\n            <GridRow centered>\n                {/* <Grid.Column width={10}> */}\n                <Header as=\"h2\">CASUALTIES PER 1M</Header>\n                {/* </Grid.Column> */}\n            </GridRow>\n            <Grid.Row centered columns={5}>\n                <Grid.Column width={4}>\n                    <Segment>\n                        <ProvinceChart\n                            params={{ usedata: \"deathC\", normalize: true,loc:\"Province\"  }}\n                        />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Segment>\n                        <NormalizedChart\n                            params={{ usedata: \"deathC\", normalize: true,loc:\"Province\"  }}\n                        />\n                    </Segment>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const panes = [\n        {\n            menuItem: \"Positive cases\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={1} className=\"plotPane\">\n                    {cases}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Casualties\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={2} className=\"plotPane\">\n                    {deaths}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Cases per million\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={3} className=\"plotPane\">\n                    {normalized}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Casualties per million\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={4} className=\"plotPane\">\n                    {normalizedd}\n                </Tab.Pane>\n            )\n        }\n    ];\n    return (\n        <Fragment>\n                <Tab\n                    menu={{ secondary: true, pointing: true, borderless:true, attached:false, tabular:false }}\n                    panes={panes}\n                    renderActiveOnly={false}\n                />\n        </Fragment>\n    );\n};\n","import React, {Fragment} from \"react\";\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport { ProvinceChart } from \"./provinceChart\";\nimport { TimeChart } from \"./timeChart\";\nimport { StatNumber } from \"./statNumber\";\nimport { DailyTimeChart } from \"./dailyTimeChart\";\nimport { NormalizedChart } from \"./normalizedChart\";\nimport { LastDateDisplay } from \"./textDisplay\";\nimport {\n    Grid,\n    Tab,\n    Segment,\n    Label,\n    Statistic,\n    StatisticValue,\n    StatisticLabel,\n    GridRow,\n    Header,\n    HeaderContent,\n    Icon\n} from \"semantic-ui-react\";\n\nexport const WorldDashboard = props => {\n    const panes_cumulative = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={1}>\n                    <TimeChart params={{ stacked: true, usedata: \"detailW\" , loc:\"Country\"}} />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={2}>\n                    <TimeChart params={{ stacked: false, usedata: \"detailW\" , loc:\"Country\"}} />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const panes_daily = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={3}>\n                    <DailyTimeChart\n                        params={{ stacked: true, usedata: \"detailW\" , loc:\"Country\"}}\n                    />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={4}>\n                    <DailyTimeChart\n                        params={{ stacked: false, usedata: \"detailW\" , loc:\"Country\"}}\n                    />\n                </Tab.Pane>\n            )\n        }\n    ];\n\n    const cases = (\n        <Grid>\n            <Grid.Row columns={16}>\n                <Grid.Column width={4}>\n                    <Grid>\n                        <GridRow centered columns={1}>\n                            <Grid.Column width={6}>\n                                <Statistic centered size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"detailW\",\n                                                total: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>Total cases</StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"detailW\",\n                                                total: false,\n                                                date: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>New cases</StatisticLabel>\n                                    <StatisticLabel>\n                                        On{\" \"}\n                                        <LastDateDisplay\n                                            params={{ usedata: \"detailW\" }}\n                                        />\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                        </GridRow>\n\n                        <Grid.Column width={16}>\n                            <Segment>\n                                <ProvinceChart params={{ usedata: \"detailW\", loc:\"Country\" }} />\n                            </Segment>\n                        </Grid.Column>\n                    </Grid>\n                    {/* </Grid> */}\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_cumulative}\n                        renderActiveOnly={false}\n                    />\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_daily}\n                        renderActiveOnly={false}\n                    />\n                    {/* <DailyTimeChart params={{usedata:'detail'}}/> */}\n                </Grid.Column>\n            </Grid.Row>\n            <Grid.Row columns={2}>\n                <Grid.Column>{/* <OriginChart/> */}</Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const panes_cumulative_d = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={11}>\n                    <TimeChart params={{ stacked: true, usedata: \"deathsW\" , loc:\"Country\"}} />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={12}>\n                    <TimeChart params={{ stacked: false, usedata: \"deathsW\" , loc:\"Country\"}} />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const panes_daily_d = [\n        {\n            menuItem: \"Stacked\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={13}>\n                    <DailyTimeChart\n                        params={{ stacked: true, usedata: \"deathsW\" , loc:\"Country\"}}\n                    />\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Total\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={14}>\n                    <DailyTimeChart\n                        params={{ stacked: false, usedata: \"deathsW\" , loc:\"Country\"}}\n                    />\n                </Tab.Pane>\n            )\n        }\n    ];\n    const deaths = (\n        <Grid>\n            <Grid.Row columns={16}>\n                {/* <GenderChart/>\n            <AgeChart/> */}\n                <Grid.Column width={4}>\n                    <Grid>\n                        <GridRow centered columns={3}>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"deathsW\",\n                                                total: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>\n                                        Total casualties\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                            <Grid.Column width={6}>\n                                <Statistic size=\"small\">\n                                    <StatisticValue>\n                                        <StatNumber\n                                            params={{\n                                                usedata: \"deathsW\",\n                                                total: false,\n                                                date: true\n                                            }}\n                                        />\n                                    </StatisticValue>\n                                    <StatisticLabel>New casualties</StatisticLabel>\n                                    <StatisticLabel>\n                                        On{\" \"}\n                                        <LastDateDisplay\n                                            params={{ usedata: \"deathsW\" }}\n                                        />\n                                    </StatisticLabel>\n                                </Statistic>\n                            </Grid.Column>\n                        </GridRow>\n                        <Grid.Column width={16}>\n                            <Segment>\n                                <ProvinceChart params={{ usedata: \"deathsW\", loc:\"Country\" }} />\n                            </Segment>\n                        </Grid.Column>\n                    </Grid>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_cumulative_d}\n                        renderActiveOnly={false}\n                    />\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Tab\n                        menu={{ secondary: true, pointing: true }}\n                        panes={panes_daily_d}\n                        renderActiveOnly={false}\n                    />\n                    {/* <DailyTimeChart params={{usedata:'detail'}}/> */}\n                </Grid.Column>\n            </Grid.Row>\n            <Grid.Row columns={2}>\n                <Grid.Column>{/* <OriginChart/> */}</Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n\n    const normalized = (\n        <Grid>\n            <GridRow centered>\n                {/* <Grid.Column width={10}> */}\n                <Header as=\"h2\">CASES PER 1M</Header>\n                {/* </Grid.Column> */}\n            </GridRow>\n            <Grid.Row centered columns={5}>\n                <Grid.Column width={4}>\n                    <Segment>\n                        <ProvinceChart\n                            params={{ usedata: \"detailW\", normalize: true, loc:\"Country\" }}\n                        />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Segment>\n                        <NormalizedChart\n                            params={{ usedata: \"detailW\", normalize: true, loc:\"Country\" }}\n                        />\n                    </Segment>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const normalizedd = (\n        <Grid>\n            <GridRow centered>\n                {/* <Grid.Column width={10}> */}\n                <Header as=\"h2\">CASUALTIES PER 1M</Header>\n                {/* </Grid.Column> */}\n            </GridRow>\n            <Grid.Row centered columns={5}>\n                <Grid.Column width={4}>\n                    <Segment>\n                        <ProvinceChart\n                            params={{ usedata: \"deathsW\", normalize: true , loc:\"Country\"}}\n                        />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column width={6}>\n                    <Segment>\n                        <NormalizedChart\n                            params={{ usedata: \"deathsW\", normalize: true, loc:\"Country\"}}\n                        />\n                    </Segment>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    );\n    const panes = [\n        {\n            menuItem: \"Positive cases\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={1} className=\"plotPane\">\n                    {cases}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Casualties\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={2} className=\"plotPane\">\n                    {deaths}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Cases per million\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={3} className=\"plotPane\">\n                    {normalized}\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: \"Casualties per million\",\n            pane: (\n                <Tab.Pane attached=\"top\" key={4} className=\"plotPane\">\n                    {normalizedd}\n                </Tab.Pane>\n            )\n        }\n    ];\n    return (\n        <Fragment>\n                <Tab\n                    menu={{ secondary: true, pointing: true, borderless:true, attached:false, tabular:false }}\n                    panes={panes}\n                    renderActiveOnly={false}\n                />\n        </Fragment>\n    );\n};\n","import React from \"react\";\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport DataContext from \"./cxContext\";\nimport {CanadaDashboard} from \"./canadaDashboard.js\"\nimport {WorldDashboard} from \"./worldDashboard.js\"\nimport {\n    Tab,\n    Segment,\n    Header,\n    Icon\n} from \"semantic-ui-react\";\n\nexport const Dashboard = props => {\n    const panes = [\n        {\n            menuItem: {content:\"Canada\", key:\"canada\", icon:'tree'},\n            pane: (\n                <Tab.Pane attached=\"top\" key={1}>\n                    <CanadaDashboard/>\n                </Tab.Pane>\n            )\n        },\n        {\n            menuItem: {content:\"World\", key:\"world\", icon:'globe'},\n            pane: (\n                <Tab.Pane attached=\"top\" key={2}>\n                    <WorldDashboard/>\n                </Tab.Pane>\n            )\n        }\n    ];\n    return (\n        <div>\n            <DataContext>\n                <Segment color=\"black\" inverted>\n                    <Header color=\"yellow\" id=\"title\" textAlign=\"center\">\n                        <Icon name=\"heartbeat\" />\n                        Canada+World Covid-19 data visualization\n                    </Header>\n                </Segment>\n                <Segment>\n                    <Tab\n                        menu={{ secondary: true, pointing: false }}\n                        panes={panes}\n                        renderActiveOnly={false}\n                    />\n                </Segment>\n                <Segment color=\"orange\">\n                    Data source:{\" \"}\n                    <a href=\"https://virihealth.com/\">ViriHealth</a>\n                </Segment>\n            </DataContext>\n        </div>\n    );\n};\n","import React from 'react';\nimport './App.css';\n// import Plot from \"./components/plot\"\nimport { Dashboard } from \"./components/dashboard\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Dashboard/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}